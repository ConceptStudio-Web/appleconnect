<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#1e96c8" />
    <title>Product Intake | Apple Connect</title>
    <link rel="icon" type="image/png" href="assets/Favicon.png" />
    <link rel="stylesheet" href="assets/css/loader.css?v=2" />
    <script src="assets/js/loader.js?v=2"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/styles.css?v=22" />
    <link rel="stylesheet" href="assets/css/footer.css?v=22" />
  </head>
  <body data-page="intake">
    <a class="skip-link" href="#content">Skip to content</a>
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <img class="logo" src="assets/Apple Connect Logo Header.jpg" alt="Apple Connect logo" />
        </div>
        <nav class="nav" aria-label="Primary">
          <button id="navToggle" class="icon-btn" aria-expanded="false" aria-controls="navMenu" aria-label="Toggle navigation">☰</button>
          <ul id="navMenu" class="nav-menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="iphones.html">iPhones</a></li>
            <li><a href="ipads.html">iPads</a></li>
            <li><a href="accessories.html">Accessories</a></li>
            <li><a href="macbooks.html">MacBooks</a></li>
            <li><a href="gaming.html">Gaming</a></li>
            <li><a href="about.html">About Us</a></li>
          </ul>
        </nav>
        <div class="header-actions">
          <button class="icon-btn" aria-label="Cart">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M6 6h15l-1.5 9h-12z" stroke="currentColor" stroke-width="2" fill="none" stroke-linejoin="round"/>
              <circle cx="9" cy="20" r="1.5" fill="currentColor"/>
              <circle cx="18" cy="20" r="1.5" fill="currentColor"/>
              <path d="M6 6L5 3H2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <main id="content" class="container section">
      <div class="section-head"><h2>Product Intake</h2></div>
      <div class="auth-card">
        <form id="intakeForm" class="booking-new">
          <div class="booking-fields">
            <div class="field">
              <label for="category">Category</label>
              <select id="category">
                <option value="iphone">iPhone</option>
                <option value="ipad">iPad</option>
                <option value="accessory">Accessory</option>
                <option value="macbook">MacBook</option>
              </select>
            </div>
            <div class="field" id="iphoneModelField" style="display:none;">
              <label for="iphoneImageSelect">iPhone Model (from images)</label>
              <select id="iphoneImageSelect"></select>
            </div>
            <div class="field" id="genericModelField">
              <label for="model">Model</label>
              <input id="model" type="text" />
            </div>
            <div class="field">
              <label for="color">Color</label>
              <input id="color" type="text" placeholder="Space Black" />
            </div>
            <div class="field">
              <label for="storage">Storage</label>
              <select id="storage">
                <option value="">—</option>
                <option>64GB</option>
                <option>128GB</option>
                <option>256GB</option>
                <option>512GB</option>
                <option>1TB</option>
              </select>
            </div>
            <div class="field">
              <label for="condition">Condition</label>
              <select id="condition">
                <option value="">—</option>
                <option>Brand New</option>
                <option>Used (Excellent)</option>
                <option>Used (Good)</option>
                <option>Used (Fair)</option>
              </select>
            </div>
            <div class="field">
              <label for="faceId">Face ID</label>
              <select id="faceId">
                <option value="">—</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </div>
            <div class="field">
              <label for="truetone">True Tone</label>
              <select id="truetone">
                <option value="">—</option>
                <option>Yes</option>
                <option>No</option>
              </select>
            </div>
            <div class="field">
              <label for="batteryHealth">Battery Health</label>
              <select id="batteryHealth">
                <option value="">—</option>
                <option>100%</option>
                <option>95%+</option>
                <option>90%+</option>
                <option>85%+</option>
                <option>80%+</option>
              </select>
            </div>
            <div class="field">
              <label for="badge">Badge</label>
              <select id="badge">
                <option value="">—</option>
                <option>New</option>
                <option>Hot</option>
                <option>Deal</option>
                <option>Pro</option>
                <option>In Stock</option>
                <option>Clearance</option>
              </select>
            </div>
            <div class="field">
              <label for="warranty">Warranty</label>
              <select id="warranty">
                <option value="">—</option>
                <option>None</option>
                <option>6 Months</option>
                <option>1 Year</option>
              </select>
            </div>
            <div class="field">
              <label for="branch">Branch</label>
              <select id="branch">
                <option value="">—</option>
                <option>Bulawayo Center</option>
                <option>Haddon & Sly</option>
                <option>Both</option>
              </select>
            </div>
            <div class="field">
              <label for="price">Price</label>
              <input id="price" type="number" step="0.01" placeholder="899" />
            </div>
            <div class="field">
              <label for="currency">Currency</label>
              <input id="currency" type="text" value="USD" />
            </div>
            <div class="field">
              <label for="tags">Tags (comma-separated)</label>
              <input id="tags" type="text" placeholder="new_stock, hot_deal" />
            </div>
          </div>

          <div class="booking-fields">
            <div class="field" id="iphoneImageInfo" style="display:none;">
              <label>Product Image (auto from iPhone selection)</label>
              <img id="productImagePreview" alt="Product preview" style="max-width:100%; border-radius:10px; background:#f5f7fa;" />
            </div>
            <div class="field" id="productImageFileField">
              <label for="productImage">Product Image (file)</label>
              <input id="productImage" type="file" accept="image/*" />
            </div>
            <div class="field" id="productImagePathField">
              <label for="productImagePath">Product Image Path</label>
              <input id="productImagePath" type="text" placeholder="assets/Your Image.jpg" />
            </div>
            <div class="field">
              <label for="previewImage">Preview Image (file)</label>
              <input id="previewImage" type="file" accept="image/*" />
            </div>
            <div class="field">
              <label for="previewImagePath">Preview Image Path</label>
              <input id="previewImagePath" type="text" placeholder="assets/Preview Images/Your Preview.jpg" />
            </div>
          </div>

          <div class="booking-fields">
            <div class="field">
              <label>Preview Image Preview</label>
              <img id="previewImagePreview" alt="Preview image" style="max-width:100%; border-radius:10px; background:#f5f7fa;" />
            </div>
          </div>

          <div class="booking-foot" style="gap:8px;">
            <button type="button" class="btn btn-outline" id="generate">Generate JSON</button>
            <button type="button" class="btn btn-primary" id="copy">Copy JSON</button>
          </div>
        </form>
      </div>

      <section class="section">
        <div class="section-head"><h3>Output</h3></div>
        <textarea id="output" style="width:100%; min-height:220px; padding:12px; border-radius:12px; border:1px solid #e5e9ef; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;"></textarea>
      </section>
    </main>

    <footer class="site-footer">
      <div class="footer-top">
        <div class="container footer-grid">
          <div class="footer-col">
            <div class="footer-brand">
              <img class="logo" src="assets/Apple Connect Logo Header.jpg" alt="Apple Connect" />
              <div class="brand-text">Apple <span class="brand-accent">Connect</span></div>
            </div>
            <div class="footer-contact" style="margin-top:10px;">
              <div class="line">Bulawayo, Zimbabwe</div>
              <div class="line">Call: +27 64 082 3961</div>
              <div class="line">Email: admin@appleconnect.co.zw</div>
            </div>
          </div>
          <div class="footer-col">
            <h4>Quick Links</h4>
            <ul>
              <li><a href="index.html">Home</a></li>
              <li><a href="iphones.html">iPhones</a></li>
              <li><a href="ipads.html">iPads</a></li>
              <li><a href="accessories.html">Accessories</a></li>
              <li><a href="macbooks.html">MacBooks</a></li>
              <li><a href="gaming.html">Gaming</a></li>
              <li><a href="about.html">About Us</a></li>
            </ul>
          </div>
          <div class="footer-col">
            <h4>Contact</h4>
            <div class="footer-contact">
              <div class="line">WhatsApp: <a href="https://wa.me/27640823961" target="_blank" rel="noopener">+27 64 082 3961</a></div>
              <div class="line">Instagram: <a href="https://www.instagram.com/apple_connect_zw" target="_blank" rel="noopener">@apple_connect_zw</a></div>
              <div class="line">Facebook: <a href="https://www.facebook.com/appleconnecttt/" target="_blank" rel="noopener">Apple Connect</a></div>
              <div class="line">Email: <a href="mailto:admin@appleconnect.co.zw" target="_blank" rel="noopener">admin@appleconnect.co.zw</a></div>
            </div>
          </div>
          <div class="footer-col footer-newsletter">
            <h4>Stay Updated</h4>
            <form onsubmit="event.preventDefault(); try{ alert('Thanks! You\'re subscribed.'); }catch(_){}">
              <input type="email" placeholder="Your email address" aria-label="Email" required />
              <button type="submit">Subscribe</button>
            </form>
            <div style="font-size:12px; color:#9aa6b2; margin-top:6px;">Get promotions and new stock updates.</div>
          </div>
        </div>
      </div>
      <div class="container footer-bottom">
        <div>© <span id="year"></span> Apple Connect. All rights reserved.</div>
        <div class="links">
          <a href="#" aria-label="Privacy Policy">Privacy</a>
          <a href="#" aria-label="Terms of Service">Terms</a>
        </div>
      </div>
    </footer>

    <script src="assets/js/app.js?v=22" defer></script>
    <script>
      document.addEventListener('DOMContentLoaded', function(){
        const $ = (id) => document.getElementById(id);
        const IPHONE_IMAGES = [
          { label: 'iPhone 11 Pro Max', path: 'assets/Product Images/iPhones/iPhone 11 Pro Max.jpg' },
          { label: 'iPhone 11 Pro', path: 'assets/Product Images/iPhones/iPhone 11 Pro.jpg' },
          { label: 'iPhone 11', path: 'assets/Product Images/iPhones/iPhone 11.png' },
          { label: 'iPhone 12 Mini', path: 'assets/Product Images/iPhones/iPhone 12 Mini.jpg' },
          { label: 'iPhone 12 Pro Max', path: 'assets/Product Images/iPhones/iPhone 12 Pro Max.jpg' },
          { label: 'iPhone 12 Pro', path: 'assets/Product Images/iPhones/iPhone 12 Pro.jpg' },
          { label: 'iPhone 12', path: 'assets/Product Images/iPhones/iPhone 12.jpg' },
          { label: 'iPhone 13 Mini', path: 'assets/Product Images/iPhones/iPhone 13 Mini.jpg' },
          { label: 'iPhone 13 Pro Max', path: 'assets/Product Images/iPhones/iPhone 13 Pro Max.jpg' },
          { label: 'iPhone 13 Pro', path: 'assets/Product Images/iPhones/iPhone 13 Pro.jpg' },
          { label: 'iPhone 13', path: 'assets/Product Images/iPhones/iPhone 13.jpg' },
          { label: 'iPhone 14 Pro Max', path: 'assets/Product Images/iPhones/iPhone 14 Pro Max.jpg' },
          { label: 'iPhone 14 Pro', path: 'assets/Product Images/iPhones/iPhone 14 Pro.jpg' },
          { label: 'iPhone 14', path: 'assets/Product Images/iPhones/iPhone 14.jpg' },
          { label: 'iPhone 15 Plus', path: 'assets/Product Images/iPhones/iPhone 15 Plus.jpg' },
          { label: 'iPhone 15 Pro Max', path: 'assets/Product Images/iPhones/iPhone 15 Pro Max.jpg' },
          { label: 'iPhone 15 Pro', path: 'assets/Product Images/iPhones/iPhone 15 Pro.jpg' },
          { label: 'iPhone 15', path: 'assets/Product Images/iPhones/iPhone 15.jpg' },
          { label: 'iPhone 16 Plus', path: 'assets/Product Images/iPhones/iPhone 16 Plus.jpg' },
          { label: 'iPhone 16 Pro Max', path: 'assets/Product Images/iPhones/iPhone 16 Pro Max.jpg' },
          { label: 'iPhone 16 Pro', path: 'assets/Product Images/iPhones/iPhone 16 Pro.jpg' },
          { label: 'iPhone 16', path: 'assets/Product Images/iPhones/iPhone 16.jpg' },
          { label: 'iPhone 16e', path: 'assets/Product Images/iPhones/iPhone 16e.jpg' },
          { label: 'iPhone 17 Pro Max', path: 'assets/Product Images/iPhones/iPhone 17 Pro Max.jpg' },
          { label: 'iPhone 17 Pro', path: 'assets/Product Images/iPhones/iPhone 17 Pro.jpg' },
          { label: 'iPhone 17', path: 'assets/Product Images/iPhones/iPhone 17.jpg' },
          { label: 'iPhone Air', path: 'assets/Product Images/iPhones/iPhone Air.jpg' },
          { label: 'iPhone X', path: 'assets/Product Images/iPhones/iPhone X.jpg' },
          { label: 'iPhone XR', path: 'assets/Product Images/iPhones/iPhone XR.jpg' },
          { label: 'iPhone XS Max', path: 'assets/Product Images/iPhones/iPhone XS Max.jpg' },
          { label: 'iPhone XS', path: 'assets/Product Images/iPhones/iPhone XS.jpg' }
        ];

        function populateIphoneSelect(){
          const sel = $('iphoneImageSelect');
          sel.innerHTML = '<option value="">— Select iPhone —</option>' + IPHONE_IMAGES.map(i => `<option value="${i.path}" data-label="${i.label}">${i.label}</option>`).join('');
        }

        function onCategoryChange(){
          const cat = $('category').value;
          const isIphone = cat === 'iphone';
          $('iphoneModelField').style.display = isIphone ? '' : 'none';
          $('iphoneImageInfo').style.display = isIphone ? '' : 'none';
          $('genericModelField').style.display = isIphone ? 'none' : '';
          $('productImageFileField').style.display = isIphone ? 'none' : '';
          $('productImagePathField').style.display = isIphone ? 'none' : '';
          if (isIphone) {
            populateIphoneSelect();
            $('model').value = '';
            $('productImagePath').value = '';
            $('productImagePreview').src = '';
          }
        }

        function suggestPath(inputEl, file){
          if (!file) return;
          const name = file.name || '';
          if (inputEl === $('productImagePath')) inputEl.value = `assets/${name}`;
          if (inputEl === $('previewImagePath')) inputEl.value = `assets/Preview Images/${name}`;
        }

        $('productImage')?.addEventListener('change', (e)=>{
          const f = e.target.files && e.target.files[0];
          if (f) {
            $('productImagePreview').src = URL.createObjectURL(f);
            suggestPath($('productImagePath'), f);
          }
        });
        $('previewImage')?.addEventListener('change', (e)=>{
          const f = e.target.files && e.target.files[0];
          if (f) {
            $('previewImagePreview').src = URL.createObjectURL(f);
            suggestPath($('previewImagePath'), f);
          }
        });

        $('category').addEventListener('change', onCategoryChange);
        onCategoryChange();

        $('iphoneImageSelect').addEventListener('change', (e)=>{
          const path = e.target.value;
          const label = e.target.options[e.target.selectedIndex]?.getAttribute('data-label') || '';
          if (path) {
            $('productImagePreview').src = path;
            $('productImagePath').value = path;
            $('model').value = label;
          } else {
            $('productImagePreview').src = '';
            $('productImagePath').value = '';
            $('model').value = '';
          }
        });

        function slug(s){ return String(s||'').toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,''); }

        $('generate')?.addEventListener('click', ()=>{
          const category = $('category').value;
          const model = $('model').value.trim();
          const id = `${category}-${slug(model || 'item')}-${Date.now().toString().slice(-4)}`;
          const priceRaw = $('price').value.trim();
          const price = priceRaw ? Number(priceRaw) : null;
          const tagsRaw = $('tags').value.trim();
          const tags = tagsRaw ? tagsRaw.split(',').map(s=>s.trim()).filter(Boolean) : [];
          const imagePath = ($('productImagePath').value.trim()) || '';
          const previewPath = ($('previewImagePath').value.trim()) || '';
          const finalPreview = previewPath || imagePath || '';
          const obj = {
            id,
            category,
            model,
            color: $('color').value.trim() || undefined,
            condition: $('condition').value || undefined,
            truetone: $('truetone').value || undefined,
            faceId: $('faceId').value || undefined,
            batteryHealth: $('batteryHealth').value || undefined,
            storage: $('storage').value || undefined,
            price: price === null ? null : price,
            currency: $('currency').value.trim() || undefined,
            tags: tags.length ? tags : undefined,
            badge: $('badge').value || undefined,
            image: imagePath || undefined,
            images: finalPreview ? [ finalPreview ] : undefined,
            warranty: $('warranty').value || undefined,
            branch: $('branch').value || undefined
          };
          Object.keys(obj).forEach(k=>{ if (obj[k] === undefined) delete obj[k]; });
          $('output').value = JSON.stringify(obj, null, 2);
        });
        $('copy')?.addEventListener('click', async ()=>{
          try { await navigator.clipboard.writeText($('output').value || ''); } catch(_) {}
        });
      });
    </script>
    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/690f29fb1bf5c2195a878379/1j9hjo02p';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
    </script>
    <!--End of Tawk.to Script-->
  </body>
</html>
